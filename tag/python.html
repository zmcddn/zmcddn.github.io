<!DOCTYPE html>
<html lang="english">
<head>
    <meta charset="utf-8">
    <title>Carson's Tech Hut - Python</title>
    <meta name="description" content="">
    <meta name="author" content="Carson Zhang">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/theme/local.css" rel="stylesheet">
    <link href="/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="/feeds/all.atom.xml" rel="alternate" title="Carson's Tech Hut" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="">Carson's Tech Hut</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
        

        


    <div class='article'>
        <div class="content-title">
            <a href="/pipenv-tutorial-the-official-package-control-for-pyton.html"><h1>Pipenv Tutorial - the official package control for pyton</h1></a>
Wed 10 October 2018

by <a class="url fn" href="/author/carson-zhang.html">Carson Zhang</a>
 


 
        </div>
        
        <div><h4>Benefits:</h4>
<ul>
<li>Pipenv is essentially a combination of pip and virtualenv (i.e. makes virtual environment), but with better version control</li>
<li>It solves the version conflict for packages and sub-dependencies</li>
<li>It could automatically install the latest package/dependency that meet all the requirements</li>
<li>It is the new <strong>STANDARD</strong> for python packages and is <strong>OFFICIALLY</strong> used</li>
</ul>
<h2>How to use it</h2>
<ul>
<li>
<p>Installation: <code>pip install pipenv</code></p>
<ul>
<li>After it is installed, use <code>pipenv</code> instead of <code>pip</code> in the future for any package install</li>
</ul>
</li>
<li>
<p>Create/Enter virtual enviornment: <code>pipenv shell</code></p>
<ul>
<li>This will create a virtual environment if one doesn’t already exist in a default location.</li>
<li>Here is <a href="https://pipenv.readthedocs.io/en/latest/advanced/#configuration-with-environment-variables">a list of environment variable</a> to setup in order to change the default behavior</li>
<li>You can force the creation of a Python 2 or 3 environment with the arguments <code>--two</code> and <code>--three</code> respectively.<ul>
<li>More specific version can be specified as <code>-python 3.6</code></li>
</ul>
</li>
<li>Quit virtual environment: <code>ctrl + D</code></li>
</ul>
</li>
<li>
<p>Install package: same as using <code>pip</code>, but use <code>pipenv</code> instead</p>
<ul>
<li>After the installation, two files are generated: <code>Pipfile</code> and <code>Pipfile.lock</code>, which are used for package version control</li>
<li>If the package cannot be installed due to package confliction, use the <code>--skip-lock</code> argument to skip the package version lock.<ul>
<li>For example, <code>pipenv install django --skip-lock</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Install from version control system (i.e. github): <code>pipenv install -e git+https://github.com/requests/requests.git#egg=requests</code></p>
</li>
<li>
<p>Install package for different environment (i.e. dev environment): <code>pipenv install pytest --dev</code></p>
<ul>
<li>Providing the <code>--dev</code> argument will put the dependency in a special <code>[dev-packages]</code> location in the <code>Pipfile</code>. These development packages only get installed if you specify the <code>--dev</code> argument with <code>pipenv install</code>.</li>
<li>The different sections separate dependencies needed only for development from ones needed for the base code to actually work.</li>
</ul>
</li>
<li>
<p>Lock the environment for production: <code>pipenv lock</code></p>
<ul>
<li>This will create/update your Pipfile.lock, which you’ll <strong>never</strong> need to (and are never meant to) edit manually. You should always use the generated file.</li>
</ul>
</li>
<li>
<p>Install the environment in production: <code>pipenv install --ignore-pipfile</code></p>
<ul>
<li>This tells Pipenv to ignore the <code>Pipfile</code> for installation and use what’s in the <code>Pipfile.lock</code>. </li>
<li>The lock file enables deterministic builds by taking a snapshot of all the versions of packages in an environment (similar to the result of a <code>pip freeze</code>).</li>
</ul>
</li>
<li>
<p>Setup the development environment: <code>pipenv install --dev</code></p>
<ul>
<li>This installs all the dependencies needed for development, which includes both the regular dependencies and those you specified with the <code>--dev</code> argument during install.</li>
<li>When an exact version isn’t specified in the Pipfile, the install command gives the opportunity for dependencies (and sub-dependencies) to update their versions.</li>
</ul>
</li>
</ul>
<h2>Pipenv’s Dependency Resolution Approach</h2>
<ul>
<li>Pipenv will attempt to install sub-dependencies that satisfy all the requirements from your core dependencies.</li>
<li>If there are conflicting dependencies, pipenv will not be able to create a lock file and wil output an error</li>
<li>Show dependency graph for top-level dependencies and their sub-dependencies: <code>pipenv graph</code></li>
<li>Show dependency graph for the sub-dependencies with the parent: <code>pipenv graph --reverse</code></li>
</ul>
<h2>The Pipfile</h2>
<ul>
<li>
<p><code>Pipfile</code> intends to replace <code>requirements.txt</code>. </p>
</li>
<li>
<p><a href="https://packaging.python.org/tutorials/managing-dependencies/#managing-dependencies">Pipenv is the official package management tool recommended by Python itself.</a></p>
</li>
<li>
<p>You shouldn’t have any sub-dependencies in your Pipfile.</p>
<ul>
<li>You should only include the packages you actually import and use. Pipenv will install the dependencies automatically.</li>
</ul>
</li>
</ul>
<h2>The Pipfile.lock</h2>
<ul>
<li>This file enables deterministic builds by specifying the exact requirements for reproducing an environment.</li>
<li>It contains exact versions for packages and hashes to support more secure verification.</li>
<li>Its in <code>JSON</code> format</li>
<li>You should <strong>never</strong> change this file by hand.</li>
</ul>
<h2>Pipenv Extra Features</h2>
<ul>
<li>
<p>Open a third-party package in your default editor: <code>pipenv open flask</code></p>
<ul>
<li>This will open the <code>flask</code> package in the default editor</li>
<li>You can specify a program with an <code>EDITOR</code> environmental variable.<ul>
<li>i.e. <code>EDITOR=subl</code> for sublime text</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Run a command in the virtual environment without launching a shell: <code>pipenv run &lt;insert command here&gt;</code></p>
</li>
<li>
<p>Check for security vulnerabilities: <code>pipenv check</code></p>
</li>
<li>
<p>Uninstall a package: <code>pipenv uninstall numpy</code></p>
</li>
<li>
<p>Wipe all the installed packages from virtual environment: <code>pipenv uninstall --all</code></p>
<ul>
<li>You can replace <code>--all</code> with <code>--all-dev</code> to just remove dev packages.</li>
</ul>
</li>
<li>
<p>Pipenv supports the automatic loading of environmental variables when a <code>.env</code> file exists in the top-level directory. </p>
<ul>
<li>When you pipenv shell to open the virtual environment, it loads your environmental variables from the file. </li>
</ul>
</li>
<li>
<p>To find out where your virtual environment is: <code>pipenv --venv</code></p>
</li>
<li>
<p>To find out where your project home is: <code>pipenv --where</code></p>
</li>
<li>
<p>Generate requirements.txt file from Pipfile:</p>
<ul>
<li><code>pipenv lock -r &gt; requirements.txt</code></li>
<li><code>pipenv lock -r -d &gt; dev-requirements.txt</code></li>
</ul>
</li>
</ul>
<h2>What if you alerady have a requirements.txt file</h2>
<ul>
<li>
<p><code>pipenv install</code> should automatically detect the <code>requirements.txt</code> and convert it to a <code>Pipfile</code></p>
<ul>
<li>You should change Pipfile to only specify exact versions if <code>requirements.txt</code> file uses exact versions</li>
</ul>
</li>
<li>
<p>If things break because of a dependency:</p>
<ul>
<li>Update code to function with the new version of the dependency.<ul>
<li>If backward compatibility with previous versions of the dependency isn’t possible, you have to bump the required version in Pipfile like <code>numpy = "&gt;=1.15"</code></li>
</ul>
</li>
<li>Restrict the version of the dependency in the Pipfile to be &lt; the version that just broke your code: <code>numpy = "&gt;=1.14.1,&lt;1.15"</code></li>
</ul>
</li>
<li>
<p>You could just install from the requirement file as usual: <code>pipenv install -r requirements.txt</code></p>
<ul>
<li>If you have a dev version or something similar, you can add the <code>--dev</code> argument as follows: <code>pipenv install -r dev-requirements.txt --dev</code></li>
</ul>
</li>
</ul>
<h2>Work flow for any project</h2>
<ol>
<li>Get pipenv: <code>pip install pipenv</code></li>
<li>Create a virtual environment: <code>pipenv shell</code></li>
<li>Setup local development: <code>pipenv install --dev</code></li>
<li>Work on the code, use version control such as <code>git</code></li>
<li>After done development, lock the environment: <code>pipenv lock</code></li>
<li>When finished working, quit environment: <code>ctrl + D</code></li>
<li>Setup production: <code>pipenv install --ignore-pipfile</code></li>
<li>Repeate steps 3-6 for development</li>
</ol>
<h2>Reference</h2>
<ul>
<li><a href="https://realpython.com/pipenv-guide/">Pipenv: A Guide to the New Python Packaging Tool</a></li>
<li><a href="https://pipenv.readthedocs.io/en/latest/basics/">Basic Usage of Pipenv</a></li>
<li><a href="https://feici02.github.io/2017/09/24/pipenv-cheatsheet.html">Pipenv Cheatsheet | feici02’s tidbits</a></li>
</ul></div>
        <hr />
    </div>
		

 
        

 

    <div class='article'>
        <a href="/setup-virtualenv-for-any-project.html"><h2>Setup Virtualenv for Any Project</h2></a>
        <div class= "well small"> Wed 04 July 2018

by <a class="url fn" href="/author/carson-zhang.html">Carson Zhang</a>
 


 </div>
        <div class="summary"><ul>
<li>Virtualenv is a very handy tool for creating seperate virtual environments for python projects.</li>
<li>It is essential and probably mandatory in many cases to use Virtualenv or Virtualenv-like tools (i.e. Anaconda, Pipenv) to run a python project.</li>
<li>In this tutorial, I'll show you how to create a virtualenv for …</li></ul> <a class="btn btn-info xsmall" href="/setup-virtualenv-for-any-project.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/install-pdftk-on-unbuntu-1804.html"><h2>Install pdftk on unbuntu 18.04</h2></a>
        <div class= "well small"> Wed 27 June 2018

by <a class="url fn" href="/author/carson-zhang.html">Carson Zhang</a>
 


 </div>
        <div class="summary"><p>PDFTK is a very handy package that handles pdfs. It could open and wrtie to existing pdfs, and a lot of other great things. However, it is missing from the Ubuntu 18 and is very tricky to install on Ubuntu 18 (but works nice and smoothly on Ubuntu 16). This …</p> <a class="btn btn-info xsmall" href="/install-pdftk-on-unbuntu-1804.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="/the-ultimate-guide-to-setup-multiple-python-environment-with-anaconda-and-sublime-text.html"><h2>The ultimate guide to setup multiple Python environment with Anaconda and Sublime Text</h2></a>
        <div class= "well small"> Sun 11 February 2018

by <a class="url fn" href="/author/carson-zhang.html">Carson Zhang</a>
 


 </div>
        <div class="summary"><p>The need for setting up a virtual executing environment of Python has a lot of advantages and has been widely discussed over internet. Here I have a tutorial for setting up multiple environment with Anaconda and Sublime Text.  </p>
<ul>
<li>The reason I choose Anaconda over Virtualenv is because Anaconda is widely …</li></ul> <a class="btn btn-info xsmall" href="/the-ultimate-guide-to-setup-multiple-python-environment-with-anaconda-and-sublime-text.html">read more</a></div>
    </div>	
				
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="/tag/python.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="/archives.html">Archives</a>
                <li><a href="/tags.html">Tags</a>



                <li><a href="/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="/category/tutorials.html">tutorials</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://getpelican.com/">Pelican</a></li>
                <li><a href="http://python.org/">Python.org</a></li>
                <li><a href="https://www.coursera.org/">Coursera</a></li>
                <li><a href="https://www.lintcode.com/">Lintcode</a></li>
                <li><a href="https://leetcode.com/">Leetcode</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://github.com/zmcddn">Github</a></li>
                <li><a href="https://www.kaggle.com/zmcddn">Kaggle</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="">Carson's Tech Hut</a> &copy; Carson Zhang 2018</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/theme/bootstrap-collapse.js"></script>
 
</body>
</html>