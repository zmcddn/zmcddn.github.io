<!DOCTYPE html>
<html lang="english">
<head>
    <meta charset="utf-8">
    <title>Carson's Blog - Linux</title>
    <meta name="description" content="">
    <meta name="author" content="Carson Zhang">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/theme/local.css" rel="stylesheet">
    <link href="/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="/feeds/all.atom.xml" rel="alternate" title="Carson's Blog" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="">Carson's Blog</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
        

        


    <div class='article'>
        <div class="content-title">
            <a href="/setup-virtualenv-for-any-project.html"><h1>Setup Virtualenv for Any Project</h1></a>
Wed 04 July 2018

by <a class="url fn" href="/author/carson-zhang.html">Carson Zhang</a>
 


 
        </div>
        
        <div><ul>
<li>Virtualenv is a very handy tool for creating seperate virtual environments for python projects.</li>
<li>It is essential and probably mandatory in many cases to use Virtualenv or Virtualenv-like tools (i.e. Anaconda, Pipenv) to run a python project.</li>
<li>In this tutorial, I'll show you how to create a virtualenv for a python project step-by-step. </li>
</ul>
<p><strong>NOTE:</strong> the commends in this tutorial is for Linux/Mac OS, Windows will be slightly differnet when setting up environment variables and system path</p>
<h2>Setup virtualenv</h2>
<h4>1. Install pip</h4>
<ul>
<li><code>sudo apt-get install python-pip</code></li>
</ul>
<h4>2. Install virtualenv</h4>
<ul>
<li><code>sudo pip install virtualenv</code></li>
</ul>
<h4>3. Create a folder to install virtualenv</h4>
<ul>
<li>Normally this folder would be created inside the project folder<ul>
<li>For example, inside the <strong>Projects</strong> folder</li>
</ul>
</li>
<li>It should be named as <strong>Envs</strong></li>
</ul>
<h4>4. Install virtualenvwrapper</h4>
<ul>
<li><code>sudo pip install virtualenvwrapper</code></li>
<li>This is a very useful tool/package to save you from the hassles of virtualenv</li>
</ul>
<h4>5. Set WORKON_HOME to your virtualenv</h4>
<ul>
<li><code>export WORKON_HOME=~/Desktop/Projects/Env</code></li>
<li>If the virtualenv folder is located at the root directary, use:<ul>
<li><code>export WORKON_HOME=~/.Env</code></li>
</ul>
</li>
</ul>
<h4>6. Add <code>virtualenvwrapper.sh</code> to <code>.bashrc</code></h4>
<ul>
<li>Nevigate to the folder where the virtualenv is installed (normally under /usr/local/bin)</li>
<li><code>nano ~/.bashrc</code></li>
<li>Add the following line to the folder:<ul>
<li><code>. /usr/local/bin/virtualenvwrapper.sh</code></li>
</ul>
</li>
<li>If the virtualenvwrapper is installed in another directory, add the path of the directory instead of the <code>/usr/local/bin/</code><ul>
<li>For example, <code>. /Users/Carson/anaconda3/bin/virtualenvwrapper.sh</code></li>
</ul>
</li>
<li><code>CTRL + X</code> to exit, and <code>Y</code> to save, and hit <code>Enter</code></li>
<li>After its being added, use <code>source ~/.bashrc</code> to check if it is working. It should print some files on the screen with no errors</li>
</ul>
<hr>
<h2>Setup virtual environment</h2>
<h4>1. make virtual environment</h4>
<ul>
<li><code>mkvirtualenv env_name --python=python3</code></li>
<li>check python version: <code>python -V</code></li>
</ul>
<h4>2. activate environment</h4>
<ul>
<li>the environment is activated by default when created</li>
<li>to activate an environment: <code>workon env_name</code></li>
</ul>
<h4>3. get the project</h4>
<ul>
<li>nevigate to the directory that you would like to download the project</li>
<li>get the project: <code>git clone</code> </li>
<li>From the directory you could tell which python version the project is under</li>
</ul>
<h4>4. get all the nesscary packages</h4>
<ul>
<li>enter the project directory and nevigate to where the requirement file is located</li>
<li><code>pip install -r requirements.txt</code></li>
</ul>
<h4>5. adding apps for the defaul path in virtualenv</h4>
<ul>
<li>sometimes when installing the packages errors may occor, since the apps are put inside the <strong>apps folder</strong> which is not recognized by virtualenv</li>
<li>add the <strong>apps folder</strong>: <code>add2virtualenv apps</code></li>
</ul>
<h4>6. setup default startup folder for the environment</h4>
<ul>
<li>nevigate to the folder where you work all the time</li>
<li>setup the folder as default: <code>setvirtualenvproject</code></li>
<li>once the defaul folder is setup, use <code>cdproject</code> to go back from anywhere</li>
</ul>
<h4>7. install dev tools:</h4>
<ul>
<li>If the project has a different requirements file for the devs, nevigate tothat folder</li>
<li><code>pip install -r /requirements/dev.txt</code></li>
</ul>
<h4>8. remove environment</h4>
<ul>
<li><code>rmvirtualenv env_name</code></li>
</ul>
<h4>9. tell django which setting files to run in environment:</h4>
<ul>
<li>the goal of this step is for the django to use the customized settings in the <code>/project_name/settings/dev.py</code></li>
<li>go to the folder where the <code>manage.py</code> locates</li>
<li>copy the path generated: <code>pwd</code></li>
<li>go to the virtual environment: <code>cdvirtualenv</code></li>
<li><code>cd bin</code></li>
<li>to enter and edit the file: <code>nano postactivate</code><ul>
<li>put the following lines below the comments:<ul>
<li><code>export DJANGO_SETTINGS_MODULE='project_name.settings.dev'</code></li>
<li><code>export PYTHONPATH=$PYTHONPATH:'path_generated_by_pwd'</code></li>
</ul>
</li>
<li>close and save the file: <code>ctrl + x</code>, type <code>y</code> and press <code>enter</code></li>
</ul>
</li>
<li>to enter and edit the file: <code>nano postdeactivate</code><ul>
<li>put the following lines below the comments:<ul>
<li><code>unset DJANGO_SETTINGS_MODULE</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>deactivate and activate</strong> the environment for the settings to work</li>
</ul>
<h4>10. start django project</h4>
<ul>
<li>with the dev-tools installed: <code>django-admin runserver</code></li>
<li>without the dev-tools installed: <code>python manage.py runserver</code></li>
</ul>
<h4>11. check the website in browser</h4>
<ul>
<li><code>localhost:8000</code></li>
</ul>
<h4>12. Force refresh the browser</h4>
<ul>
<li>Sometimes when working with multiple projects and switching back and forth, the page display in browser can be scattered since there is cache built-in the browser</li>
<li>to force refresh the browser: <code>ctrl + shift + r</code></li>
</ul>
<h4>13. Some useful virtualenv commands</h4>
<ul>
<li><strong><code>lsvirtualenv</code></strong>: List all of the environments.</li>
<li><strong><code>cdsitepackages</code></strong>: Navigate into the <code>site-package</code> directory of the currently activated virtual environment</li>
<li><strong><code>lssitepackages</code></strong>: Shows contents of <code>site-package</code> directory.</li>
</ul></div>
        <hr />
    </div>
		
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="/tag/linux.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="/archives.html">Archives</a>
                <li><a href="/tags.html">Tags</a>



                <li><a href="/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="/category/tutorials.html">tutorials</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://getpelican.com/">Pelican</a></li>
                <li><a href="http://python.org/">Python.org</a></li>
                <li><a href="https://www.coursera.org/">Coursera</a></li>
                <li><a href="https://www.lintcode.com/">Lintcode</a></li>
                <li><a href="https://leetcode.com/">Leetcode</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://github.com/zmcddn">Github</a></li>
                <li><a href="https://www.kaggle.com/zmcddn">Kaggle</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="">Carson's Blog</a> &copy; Carson Zhang 2018</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/theme/bootstrap-collapse.js"></script>
 
</body>
</html>